<mat-card *ngIf="issue.visible">
  <mat-card-title class="issue" (mouseenter)="calculateTooltips()">
    <div class="title-container">
      <span class="title-container"
            matTooltip="{{cardTooltip}}"
            [matTooltipClass]="{'card-tooltip': true}">
        <span class="mat-h4">
          <a href="{{issue.issueUrl}}"
             target="_blank"
             class="issue-link"
             >{{issue.key}}</a></span>
        <span class="space-filler"></span>
      </span>
      <span class="mat-h4" matTooltip="{{issue.assignee.name}}">{{issue.assignee.initials}}</span>
      <span class="mat-h4">
        <button mat-icon-button class="menu-icon-button">
          <mat-icon class="menu-icon">more_vert</mat-icon>
        </button>
      </span>
    </div>
  </mat-card-title>
  <mat-card-content>
    <!-- TODO pull these out of the data -->
    <div class="info-colours">
      <div class="project-colour" [ngStyle]="{'border-bottom-color': issue.projectColour}"></div>
      <div class="colour" [ngStyle]="{'border-bottom-color': issue.priority.colour}"></div>
      <div class="colour"  [ngStyle]="{'border-bottom-color': issue.type.colour}"></div>
    </div>
    <div class="mat-caption">
      <div class="full-summary">
        <div class="avatar-container" matTooltip="{{issue.assignee.name}}">
          <img
            *ngIf="issue.assignee.avatar"
            class="avatar"
            src="{{issue.assignee.avatar}}">
          <mat-icon
            *ngIf="!issue.assignee.avatar"
            class="avatar-icon">person_outline</mat-icon>
        </div>
        {{issue.summary}}
      </div>
    </div>

    <!-- TODO avatar -->
  </mat-card-content>
</mat-card>
